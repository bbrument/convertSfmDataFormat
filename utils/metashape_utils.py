import os
import numpy as np
import xmltodict

from utils.utils import _cv_to_gl

def read_metashape_xml(metashape_xml_path, images_folder=None):

    """
    <?xml version="1.0" encoding="UTF-8"?>
    <document version="1.5.0">
    <chunk label="Chunk 1" enabled="true">
        <sensors next_id="1">
        <sensor id="0" label="NIKON Z 7_2, NIKKOR Z MC 50mm f/2.8 (50mm)" type="frame">
            <resolution width="8256" height="5504"/>
            <property name="pixel_width" value="0.0043604651162790697"/>
            <property name="pixel_height" value="0.0043604651162790697"/>
            <property name="focal_length" value="50"/>
            <property name="layer_index" value="0"/>
            <bands>
            <band label="Red"/>
            <band label="Green"/>
            <band label="Blue"/>
            </bands>
            <data_type>uint8</data_type>
            <calibration type="frame" class="adjusted">
            <resolution width="8256" height="5504"/>
            <f>11755.385867986615</f>
            <cx>-6.4834068402197005</cx>
            <cy>30.633907610396285</cy>
            <k1>0.089407999287026432</k1>
            <k2>0.035945526474938913</k2>
            <k3>-0.32717123932198816</k3>
            <p1>-0.0003911232428153104</p1>
            <p2>7.0641953961565466e-05</p2>
            </calibration>
            <covariance>
            <params>f cx cy k1 k2 k3 p1 p2</params>
            <coeffs>2.7227850684544436e-01 3.5587803229328377e-03 -8.9258678013773140e-03 -2.0333450612025158e-05 2.5254937303243000e-04 -9.8278017538369145e-04 -6.3147824191730241e-09 -7.8691026449664859e-08 3.5587803229328377e-03 2.4288444862572386e-01 2.9081445806473104e-02 -2.6933708647456767e-06 6.4930508611739534e-05 -3.3550275184032172e-04 8.9409052879130274e-06 1.2838387384812636e-06 -8.9258678013773140e-03 2.9081445806473104e-02 1.4102766344737330e-01 -8.2146565818887959e-07 4.1653338450899911e-05 -3.0098302915855258e-04 1.2589574349921345e-06 4.5731029457446956e-06 -2.0333450612025158e-05 -2.6933708647456767e-06 -8.2146565818887959e-07 8.9789835885982430e-08 -1.2418781818774832e-06 5.3142338051315751e-06 -1.2036882942699444e-10 7.5696320462954341e-11 2.5254937303243000e-04 6.4930508611739534e-05 4.1653338450899911e-05 -1.2418781818774832e-06 2.0429298503784493e-05 -9.5300673623915260e-05 2.1495224657716160e-09 -1.7366101632569672e-10 -9.8278017538369145e-04 -3.3550275184032172e-04 -3.0098302915855258e-04 5.3142338051315751e-06 -9.5300673623915260e-05 4.7149738036452045e-04 -1.0590378183722249e-08 -4.0064977705566569e-09 -6.3147824191730241e-09 8.9409052879130274e-06 1.2589574349921345e-06 -1.2036882942699444e-10 2.1495224657716160e-09 -1.0590378183722249e-08 3.5853142394630962e-10 5.5149702180596334e-11 -7.8691026449664859e-08 1.2838387384812636e-06 4.5731029457446956e-06 7.5696320462954341e-11 -1.7366101632569672e-10 -4.0064977705566569e-09 5.5149702180596334e-11 1.9682891974921402e-10</coeffs>
            </covariance>
            <meta>
            <property name="Exif/BodySerialNumber" value="6015999"/>
            <property name="Exif/LensModel" value="NIKKOR Z MC 50mm f/2.8"/>
            <property name="Exif/LensSerialNumber" value="20006399  "/>
            <property name="Exif/Make" value="NIKON CORPORATION"/>
            <property name="Exif/Model" value="NIKON Z 7_2"/>
            <property name="Exif/Software" value="Ver.01.61"/>
            </meta>
        </sensor>
        </sensors>
        <components next_id="1" active_id="0">
        <component id="0" label="Component 1">
            <transform>
            <rotation locked="true">1.5794522643812561e-02 -9.9576205832182130e-01 -9.0600531240958432e-02 9.9068123860326129e-01 2.7844591124408475e-02 -1.3332427470128036e-01 1.3528198894886961e-01 -8.7650453232167025e-02 9.8692258131741695e-01</rotation>
            <translation locked="true">2.8124270532000166e-02 -2.2582621394150196e-02 3.1423181615446183e-01</translation>
            <scale locked="true">4.1742067062765946e-02</scale>
            </transform>
            <region>
            <center>9.6301560532412533e-01 -1.9555670328101438e-01 -7.1428929690538308e+00</center>
            <size>3.9227424466798992e+00 3.3722517372082073e+00 9.9536752479369239e-01</size>
            <R>-9.9061187736964118e-01 -3.1751312527630408e-02 1.3296602034718355e-01 1.9681448340380478e-02 -9.9564506944597175e-01 -9.1123741577875020e-02 1.3528026096005225e-01 -8.7651296856915681e-02 9.8692274325495266e-01</R>
            </region>
            <partition>
            <camera_ids>0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79</camera_ids>
            </partition>
        </component>
        </components>
        <cameras next_id="80" next_group_id="0">
        <camera id="0" sensor_id="0" component_id="0" label="DSC_2402">
            <transform>5.5699528258287945e-02 -9.2133129240270728e-01 -3.8476773798144831e-01 9.6908448338822879e+00 -9.9665124156529561e-01 -2.8199081885289395e-02 -7.6753595793170107e-02 2.5710073557059130e+00 5.9865392658520040e-02 3.8775438285128799e-01 -9.1981665202444440e-01 1.3296585418670686e+01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="1" sensor_id="0" component_id="0" label="DSC_2403">
            <transform>1.4906626044351778e-02 -9.1598454294168907e-01 -4.0093654060446815e-01 1.0354047024446064e+01 -9.9919159445995687e-01 -2.8618782781359334e-02 2.8233363821592399e-02 -4.5602285549527377e-01 -3.7335640620496754e-02 4.0019155708737530e-01 -9.1567066545534770e-01 1.3323096715804052e+01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="2" sensor_id="0" component_id="0" label="DSC_2404">
            <transform>-5.0174450575031670e-02 -9.1223897586000757e-01 -4.0657419425165131e-01 1.0719369473826507e+01 -9.8437220529967517e-01 -2.3633970763687187e-02 1.7450729743880403e-01 -3.8242632380185615e+00 -1.6880132091588543e-01 4.0897614398376197e-01 -8.9679687092965787e-01 1.3150628648353932e+01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="3" sensor_id="0" component_id="0" label="DSC_2405">
            <transform>-8.1018098458140675e-02 -9.1148139034511300e-01 -4.0328370011291959e-01 1.0576209418036301e+01 -9.5637604233574858e-01 -4.2849682065978327e-02 2.8897884073588276e-01 -7.1012133703450520e+00 -2.8067941386649120e-01 4.0910338522357043e-01 -8.6824736500042299e-01 1.2939214213275156e+01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="4" sensor_id="0" component_id="0" label="DSC_2406">
            <transform>-5.0229694782003786e-02 -9.8055508155593274e-01 -1.8970690497961495e-01 4.4459138492025847e+00 -9.5541889290288740e-01 -8.1585176222433720e-03 2.9514094543866437e-01 -7.2893770409757286e+00 -2.9094968095244206e-01 1.9607440073871296e-01 -9.3643105060043086e-01 1.1778943568368753e+01 0 0 0 1</transform>
            <orientation>6</orientation>
        </camera>
        <camera id="5" sensor_id="0" component_id="0" label="DSC_2407">
            <transform>2.2553010315829791e-02 -9.9049993931955194e-01 -1.3565114055420985e-01 3.4361402008125173e+00 -9.9621902439425969e-01 -3.3652384749401860e-02 8.0094771587337063e-02 -2.8172108216487142e+00 -8.3898850770696184e-02 1.3333186869103031e-01 -9.8751384579190293e-01 1.2009745386413163e+01 0 0 0 1</transform>
            <orientation>8</orientation>
        </camera>
        <camera id="6" sensor_id="0" component_id="0" label="DSC_2408">
            <transform>8.7008333412197381e-04 -9.9335587554826887e-01 -1.1507974395489542e-01 2.9111612091215395e+00 -9.9730107041002725e-01 7.5866590918268750e-03 -7.3027512369229330e-02 1.3720659441147172e+00 7.3415379274408318e-02 1.1483269185017395e-01 -9.9066827695674076e-01 1.2276991231882887e+01 0 0 0 1</transform>
            <orientation>8</orientation>
        </camera>
        <camera id="7" sensor_id="0" component_id="0" label="DSC_2409">
            <transform>-2.4217646205232257e-02 -9.9746968694564786e-01 -6.6841074473932324e-02 2.5784415788376283e+00 -9.6488780057084145e-01 4.0813975037947481e-02 -2.5947206352739777e-01 5.3321539528204500e+00 2.6154356792290334e-01 5.8210334702296238e-02 -9.6343475078076990e-01 1.2315119534413526e+01 0 0 0 1</transform>
            <orientation>8</orientation>
        </camera>
        <camera id="8" sensor_id="0" component_id="0" label="DSC_2410">
            <transform>-3.8276985238386380e-02 -9.9217151691727434e-01 1.1887200435398974e-01 -2.3597720559292905e+00 -9.6843969766333859e-01 7.5126199981377373e-03 -2.4913472766859673e-01 5.0457919039255321e+00 2.4629134047059531e-01 -1.2465649425055293e-01 -9.6114584431831129e-01 1.1998538359674965e+01 0 0 0 1</transform>
            <orientation>8</orientation>
        </camera>
        <camera id="9" sensor_id="0" component_id="0" label="DSC_2411">
            <transform>-1.6100870053714467e-02 -9.9153632799428226e-01 1.2882729621911607e-01 -2.2547681810730729e+00 -9.9853801045172430e-01 9.2961244097469198e-03 -5.3248697205382500e-02 8.3011963336055128e-01 5.1600423124480162e-02 -1.2949630241274457e-01 -9.9023638793714386e-01 1.1572019425874412e+01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="10" sensor_id="0" component_id="0" label="DSC_2412">
            <transform>7.1630200745837369e-02 -9.8738293949702116e-01 1.4122338733840450e-01 -2.2183108532023414e+00 -9.8724177192467732e-01 -4.9997688577344657e-02 1.5117511337500664e-01 -3.1225408992519066e+00 -1.4220688488302621e-01 -1.5025033087199774e-01 -9.7836702722685887e-01 1.1273880086201958e+01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="11" sensor_id="0" component_id="0" label="DSC_2413">
            <transform>4.5740945423721424e-02 -9.9012526082132479e-01 1.3251314574504286e-01 -2.3750574109845557e+00 -9.5903553958869214e-01 -6.4008932891471138e-03 2.8321345725605473e-01 -6.4258622111423751e+00 -2.7956859572843723e-01 -1.4003926752380477e-01 -9.4985809668277577e-01 1.1086212130832896e+01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="12" sensor_id="0" component_id="0" label="DSC_2414">
            <transform>-7.0753017031724075e-01 -6.8719641861352065e-01 1.6480940608960434e-01 -2.3496493391979167e+00 -6.8771319335922920e-01 6.1587778441142127e-01 -3.8437627183286294e-01 8.2455666688711506e+00 1.6263954553093266e-01 -3.8529941203333107e-01 -9.0834615720894696e-01 1.0670244356881769e+01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="13" sensor_id="0" component_id="0" label="DSC_2415">
            <transform>-4.4861779949370395e-01 -8.3469323254224936e-01 3.1942022090906630e-01 -5.4995066404277946e+00 -8.9107554392748867e-01 3.9025202940444986e-01 -2.3170612542623575e-01 4.9343290554116965e+00 6.8749145389283908e-02 -3.8857503920591474e-01 -9.1884873287955537e-01 1.0637235847778248e+01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="14" sensor_id="0" component_id="0" label="DSC_2416">
            <transform>-1.1482287026249649e-02 -9.1881496640504245e-01 3.9452150080160203e-01 -7.3652842711668951e+00 -9.9980305134984182e-01 1.6936330707161051e-02 1.0345009121462634e-02 9.4279514616155483e-02 -1.6186895817057997e-02 -3.9432501596053898e-01 -9.1882847484801455e-01 1.0874018604568167e+01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="15" sensor_id="0" component_id="0" label="DSC_2417">
            <transform>4.2350654100722496e-01 -8.2541038603027683e-01 3.7328260655627266e-01 -7.3171887559667512e+00 -8.9701932753568026e-01 -3.2456692020994682e-01 3.0002106648178228e-01 -6.2786183035619230e+00 -1.2648531832403262e-01 -4.6190259680887147e-01 -8.7786528312132794e-01 9.8517363783267129e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="16" sensor_id="0" component_id="0" label="DSC_2418">
            <transform>8.1440445887874202e-01 -5.2569203977688028e-01 2.4575039506305107e-01 -4.9318777117868349e+00 -5.6996893396516612e-01 -6.4509253190916693e-01 5.0891162257275313e-01 -1.1156268826452113e+01 -1.0899904436753081e-01 -5.5452998529407138e-01 -8.2499436588180530e-01 1.0228411675532842e+01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="17" sensor_id="0" component_id="0" label="DSC_2419">
            <transform>9.5298581732603016e-01 -2.8735915342915602e-01 9.6139216326725577e-02 -1.3734450159208713e+00 -2.7942442218334140e-01 -7.1065476169199471e-01 6.4567158987522388e-01 -1.5786086964791791e+01 -1.1721784959187732e-01 -6.4217951277269258e-01 -7.5753907431371670e-01 1.0508668687958693e+01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="18" sensor_id="0" component_id="0" label="DSC_2420">
            <transform>9.0138882487861793e-01 2.3384004376265038e-01 -3.6444069519885658e-01 9.4829262311443738e+00 4.2462578399011952e-01 -6.4218075907671934e-01 6.3819810109590880e-01 -1.4552790603716666e+01 -8.4800530391741444e-02 -7.3001555230332560e-01 -6.7814907169482253e-01 7.7195209303531112e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="19" sensor_id="0" component_id="0" label="DSC_2421">
            <transform>9.9075680876996097e-01 -6.2893691621323952e-02 -1.2018872422238822e-01 2.7871833978933624e+00 3.3053805410171590e-02 -7.4738178589820259e-01 6.6357208504842935e-01 -1.3579593437240263e+01 -1.3156136143970992e-01 -6.6141125607435425e-01 -7.3839471728491879e-01 7.0923200701619926e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="20" sensor_id="0" component_id="0" label="DSC_2422">
            <transform>-9.8582217695070362e-01 -1.6749385403148839e-01 1.0022190072737193e-02 -3.1729733162284485e-01 -1.6149157794070798e-01 9.3088788066952333e-01 -3.2767090788903364e-01 8.8485099484273011e+00 4.5553327939853616e-02 -3.2464374702784865e-01 -9.4473876380157196e-01 1.6742561838093870e+01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="21" sensor_id="0" component_id="0" label="DSC_2423">
            <transform>-9.5534162808645484e-01 1.8616452309388923e-01 -2.2948887551763089e-01 6.1713512667134447e+00 2.6243803972298613e-01 8.9147032607013077e-01 -3.6933309226600730e-01 1.0176033159095208e+01 1.3582580370267749e-01 -4.1306588830069169e-01 -9.0051536520532616e-01 1.5443173594400417e+01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="22" sensor_id="0" component_id="0" label="DSC_2424">
            <transform>-6.0215588290412247e-01 6.3958863982652581e-01 -4.7784376577372256e-01 1.2216690346165450e+01 7.8713707758149365e-01 5.7568458790631749e-01 -2.2136502963114846e-01 5.3680327342810630e+00 1.3350473317610345e-01 -5.0942480019330472e-01 -8.5009579411239844e-01 1.2426157531719840e+01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="23" sensor_id="0" component_id="0" label="DSC_2425">
            <transform>-2.8725595093860146e-01 7.6864057418590637e-01 -5.7155549718773568e-01 1.5076252530072662e+01 9.5700225613860346e-01 2.5546313016625799e-01 -1.3742369108447292e-01 1.8620677061199487e+00 4.0381931553394972e-02 -5.8645567338104709e-01 -8.0897406804124417e-01 9.9506809097676197e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="24" sensor_id="0" component_id="0" label="DSC_2426">
            <transform>6.6824613679075240e-01 5.4781074890791248e-01 -5.0333933290096389e-01 1.2389953656986190e+01 7.4090613311414377e-01 -5.5110929289312605e-01 3.8384456385454435e-01 -8.0393508681792234e+00 -6.7120805850959045e-02 -6.2942984570783611e-01 -7.7415299957703931e-01 8.1956086157993120e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="25" sensor_id="0" component_id="0" label="DSC_2427">
            <transform>2.0400954293399765e-01 7.0541452285560280e-01 -6.7880074936336365e-01 1.5016078559848561e+01 9.7796406675550884e-01 -1.1544410415225455e-01 1.7395097858738884e-01 -3.8743945783048992e+00 4.4344002152355455e-02 -6.9933040099861687e-01 -7.1342175444278821e-01 6.0068948746276218e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="26" sensor_id="0" component_id="0" label="DSC_2428">
            <transform>7.5205192043343860e-03 7.4405068477195468e-01 -6.6808084861136585e-01 1.4188327495878315e+01 9.8770296814610747e-01 9.8806989561879721e-02 1.2116115519871806e-01 -2.4147056118041812e+00 1.5616109792860219e-01 -6.6077663192950753e-01 -7.3415798993788084e-01 5.8756044759212589e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="27" sensor_id="0" component_id="0" label="DSC_2429">
            <transform>9.9294225001199288e-01 8.2859944779210271e-02 8.4852328738272656e-02 -1.7459292149485861e+00 1.0978244225762070e-01 -9.1285020068940015e-01 -3.9325859999912821e-01 5.5567066119355610e+00 4.4872079437817847e-02 3.9979837499983423e-01 -9.1550409929962528e-01 5.8870483963597451e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="28" sensor_id="0" component_id="0" label="DSC_2430">
            <transform>9.9765246332404445e-01 5.7727668340121108e-02 -3.6838549530067446e-02 8.1534503144360071e-01 3.9308675852933073e-02 -9.2323919760581752e-01 -3.8220964405265290e-01 5.8604542585671755e+00 -5.6074864477368917e-02 3.7986431829296563e-01 -9.2334105793128529e-01 5.8326130937655218e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="29" sensor_id="0" component_id="0" label="DSC_2431">
            <transform>9.8301518325766879e-01 2.5932877828584958e-02 -1.8168278766140444e-01 3.0650087442331824e+00 -4.2838993440161968e-02 -9.3019456407035717e-01 -3.6455849134945711e-01 5.7620790154430210e+00 -1.7845439228532609e-01 3.6614963993084304e-01 -9.1328444148172638e-01 5.5618797216286184e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="30" sensor_id="0" component_id="0" label="DSC_2432">
            <transform>9.5284858036982567e-01 -1.1885229281705822e-02 -3.0321333119130756e-01 4.9241463410651871e+00 -1.2146727355443175e-01 -9.3062338225972430e-01 -3.4523299646285854e-01 5.5295535420160844e+00 -2.7807424250092111e-01 3.6578526722162058e-01 -8.8818683504156182e-01 5.1707533564576984e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="31" sensor_id="0" component_id="0" label="DSC_2433">
            <transform>8.9034230252682744e-01 -4.8131843601246727e-02 -4.5274044436384531e-01 7.2088325419305068e+00 -2.1204816606790394e-01 -9.2379947909070403e-01 -3.1879475795405143e-01 5.1801080983703063e+00 -4.0289720723587247e-01 3.7983923976241440e-01 -8.3270402445181246e-01 4.4429603342730362e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="32" sensor_id="0" component_id="0" label="DSC_2434">
            <transform>8.3681860530879415e-01 -7.7314485401030364e-02 -5.4199362741292290e-01 8.8050366622028466e+00 -2.4947786366872865e-01 -9.3507129678119316e-01 -2.5179846201918082e-01 4.2455238006058256e+00 -4.8733501551636094e-01 3.4592505009483099e-01 -8.0177331108521965e-01 3.9788601203247089e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="33" sensor_id="0" component_id="0" label="DSC_2435">
            <transform>8.3871560213222396e-01 3.9750736123777747e-02 -5.4311694663083254e-01 9.2059217408594893e+00 3.2766779058607011e-03 -9.9768264193458212e-01 -6.7960351414142958e-02 7.4084843165949343e-01 -5.4455982419003512e-01 5.5219787758106688e-02 -8.3690224812582970e-01 3.2657952791604039e+00 0 0 0 1</transform>
            <orientation>6</orientation>
        </camera>
        <camera id="34" sensor_id="0" component_id="0" label="DSC_2436">
            <transform>9.1717214301465511e-01 -1.0311818330480671e-02 -3.9835778702144620e-01 6.5644306574633298e+00 -8.0182619261755725e-03 -9.9994030025417868e-01 7.4231666602389001e-03 -3.7659819946518219e-01 -3.9841055150885241e-01 -3.6141845970565356e-03 -9.1720007093115208e-01 4.1815785489306725e+00 0 0 0 1</transform>
            <orientation>6</orientation>
        </camera>
        <camera id="35" sensor_id="0" component_id="0" label="DSC_2437">
            <transform>9.7155178462449121e-01 -2.2843825366936014e-02 -2.3572290816883087e-01 3.6874139033626996e+00 -1.8682778998952553e-02 -9.9962798022225385e-01 1.9870956837882314e-02 -5.0200393583177993e-01 -2.3608914325280286e-01 -1.4901704579731778e-02 -9.7161713428632779e-01 4.7001524239560410e+00 0 0 0 1</transform>
            <orientation>6</orientation>
        </camera>
        <camera id="36" sensor_id="0" component_id="0" label="DSC_2438">
            <transform>9.9757630998298708e-01 -6.3022834515717205e-02 -2.9489457274286823e-02 4.8432471950516220e-01 -6.2734055103454020e-02 -9.9797379153346943e-01 1.0618368169722925e-02 -1.6260001665194859e-01 -3.0098905146271684e-02 -8.7426392991769384e-03 -9.9950869039097412e-01 4.9725270880447674e+00 0 0 0 1</transform>
            <orientation>8</orientation>
        </camera>
        <camera id="37" sensor_id="0" component_id="0" label="DSC_2439">
            <transform>9.8512916916550219e-01 -6.8320188215653416e-02 1.5764793668635288e-01 -2.1640971821526946e+00 -6.8307401577535939e-02 -9.9764912977236730e-01 -5.5057019682129282e-03 1.1237310273223204e-01 1.5765347744027686e-01 -5.3446933134866370e-03 -9.8748003286363861e-01 4.7017701088481028e+00 0 0 0 1</transform>
            <orientation>8</orientation>
        </camera>
        <camera id="38" sensor_id="0" component_id="0" label="DSC_2440">
            <transform>9.6555260674509236e-01 -2.1872513527936546e-01 1.4095204434409617e-01 -1.6595209272580091e+00 -2.4696533875964127e-01 -9.4092345378771935e-01 2.3167040286477075e-01 -2.9648972018818500e+00 8.1952944175864628e-02 -2.5850023077206891e-01 -9.6252862068184486e-01 3.5257557054871986e+00 0 0 0 1</transform>
            <orientation>8</orientation>
        </camera>
        <camera id="39" sensor_id="0" component_id="0" label="DSC_2441">
            <transform>9.9121753666283841e-01 -1.2842776989043209e-01 -3.1529397917249513e-02 5.5729108921220838e-01 -1.1483688961813313e-01 -9.5416882506195011e-01 2.7635908174462132e-01 -3.5291608057878880e+00 -6.5576549123041991e-02 -2.7031123025295833e-01 -9.6053711797319175e-01 3.3026896201683833e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="40" sensor_id="0" component_id="0" label="DSC_2442">
            <transform>9.8239480714337568e-01 -4.0393522360906708e-02 -1.8239738553227303e-01 2.5218588897103116e+00 1.3868142241197520e-02 -9.5788243508332638e-01 2.8682558322021257e-01 -3.4225500635715886e+00 -1.8630114741597170e-01 -2.8430547639839154e-01 -9.4045854696598741e-01 2.8610293349048987e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="41" sensor_id="0" component_id="0" label="DSC_2443">
            <transform>9.5109236904780725e-01 1.4422210761234983e-02 -3.0856977391797241e-01 4.6727882283855617e+00 1.0560438422340303e-01 -9.5390463568000006e-01 2.8091575260387674e-01 -3.4839785562547032e+00 -2.9029471158087933e-01 -2.9976314961143080e-01 -9.0877446848115695e-01 2.6030706699383761e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="42" sensor_id="0" component_id="0" label="DSC_2444">
            <transform>8.8405482555582426e-01 1.3560654962023222e-01 -4.4727835752644757e-01 6.6233690616747429e+00 2.6105224639343150e-01 -9.3706224786585590e-01 2.3187511353643186e-01 -2.8925627697880563e+00 -3.8768387903600571e-01 -3.2175333304363085e-01 -8.6381479647602133e-01 2.4807904925037856e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="43" sensor_id="0" component_id="0" label="DSC_2445">
            <transform>8.0186257453861276e-01 2.4506274854869758e-01 -5.4494097003993547e-01 8.5790922654892050e+00 4.1742887942789303e-01 -8.8230757873636101e-01 2.1745451736846860e-01 -2.5162732559792649e+00 -4.2751554611953196e-01 -4.0184273762025091e-01 -8.0978569513667042e-01 2.1817757997555809e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="44" sensor_id="0" component_id="0" label="DSC_2446">
            <transform>9.1890612391529514e-01 1.2546150564112760e-01 -3.7399324329889921e-01 6.5403417439004379e+00 3.2196441345374427e-01 -7.8632578585759094e-01 5.2728614144961972e-01 -6.5394644789063676e+00 -2.2792641773246630e-01 -6.0493897964811538e-01 -7.6295372009181650e-01 1.3983856285344953e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="45" sensor_id="0" component_id="0" label="DSC_2447">
            <transform>9.5458563059423596e-01 7.6816186747197715e-02 -2.8786376520261175e-01 4.5810761107120843e+00 2.2652671400797755e-01 -8.1471820015605445e-01 5.3377888884371094e-01 -6.8656475232980689e+00 -1.9352498986888669e-01 -5.7474649001807632e-01 -7.9511920521903423e-01 1.7726676779207251e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="46" sensor_id="0" component_id="0" label="DSC_2448">
            <transform>9.8671084581960633e-01 -9.1958720687243672e-03 -1.6222559193558816e-01 2.3456655101869988e+00 8.3860782489854138e-02 -8.2632799987350758e-01 5.5691059047681679e-01 -7.0617293140367527e+00 -1.3917282745617304e-01 -5.6311408485487535e-01 -8.1457562665225269e-01 1.8676970778085338e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="47" sensor_id="0" component_id="0" label="DSC_2449">
            <transform>9.8343326440960821e-01 -1.8103283177921639e-01 -9.2805318090518410e-03 5.7877611980987620e-02 -1.4910006797319172e-01 -8.3695744333992195e-01 5.2656567279712752e-01 -5.9972644837445817e+00 -1.0309308503993109e-01 -5.1645847060136396e-01 -8.5008379819935975e-01 1.4902815048966958e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="48" sensor_id="0" component_id="0" label="DSC_2450">
            <transform>8.9808866635228779e-01 -4.2537011651713130e-01 1.1179003239900762e-01 -1.3107686697004588e+00 -4.2362920960429512e-01 -7.6831051029646735e-01 4.7983044144574882e-01 -5.2911827377185405e+00 -1.1821607394770452e-01 -4.7828780430007217e-01 -8.7021016778603932e-01 1.4254970093696908e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="49" sensor_id="0" component_id="0" label="DSC_2451">
            <transform>3.6211704978625781e-01 -8.7784932741459898e-01 3.1345143262048347e-01 -2.7032001137761141e+00 -9.1668079465199126e-01 -2.7440080794502142e-01 2.9051767126168648e-01 -3.2499799195813956e+00 -1.6901941595654194e-01 -3.9253631036740572e-01 -9.0407283007114703e-01 5.7631677780972668e-01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="50" sensor_id="0" component_id="0" label="DSC_2452">
            <transform>-4.6155734754022903e-02 -9.2859731389879496e-01 3.6820738282828952e-01 -3.4894614489908795e+00 -9.9557775717873731e-01 7.2952843487802788e-02 5.9184559118056562e-02 -7.7153581766059842e-01 -8.1820398191837451e-02 -3.6384737356065472e-01 -9.2785802318713750e-01 9.6049049609909098e-01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="51" sensor_id="0" component_id="0" label="DSC_2453">
            <transform>-3.9079433785470541e-01 -8.5583645870703995e-01 3.3885652044559317e-01 -2.9957551640903217e+00 -9.2046949847485393e-01 3.6493107839259148e-01 -1.3986139710681891e-01 1.3407270007348782e+00 -3.9607926168526153e-03 -3.6656413350328276e-01 -9.3038435506560069e-01 1.0350081578605439e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="52" sensor_id="0" component_id="0" label="DSC_2454">
            <transform>-7.9256950445130603e-01 -5.7930273578962654e-01 1.9037310976203040e-01 -1.5519375765260872e+00 -6.0888102672062916e-01 7.3488120520178901e-01 -2.9868630624921239e-01 3.0137789914527935e+00 3.3128174013133636e-02 -3.5264423226223318e-01 -9.3517087718701708e-01 1.0477962906525040e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="53" sensor_id="0" component_id="0" label="DSC_2455">
            <transform>-9.8872085180675717e-01 9.3806229940392630e-02 -1.1675387970808762e-01 2.0828881696894750e+00 1.4193634056251739e-01 8.3569564963058351e-01 -5.3053450068420482e-01 5.0347189320082810e+00 4.7803267987047350e-02 -5.4112214186160157e-01 -8.3958422755365725e-01 6.3903796919105747e-03 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="54" sensor_id="0" component_id="0" label="DSC_2456">
            <transform>9.2352604682048201e-01 -1.9639240353476828e-01 -3.2943840801881297e-01 4.7133848609074054e+00 -3.5950545999587591e-01 -7.4252903554234007e-01 -5.6516055737260773e-01 7.5686009081635488e+00 -1.3362434313135729e-01 6.4037540178429697e-01 -7.5634904621630450e-01 2.3258529792845977e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="55" sensor_id="0" component_id="0" label="DSC_2457">
            <transform>8.6212031516236620e-01 -2.6506652208029291e-01 -4.3184291247697781e-01 6.2629609759661840e+00 -4.7821135948439297e-01 -7.0739318509674731e-01 -5.2048897907522251e-01 6.9977540613725102e+00 -1.6751852985395371e-01 6.5523630893818496e-01 -7.3661585755713510e-01 2.2018592179947261e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="56" sensor_id="0" component_id="0" label="DSC_2458">
            <transform>7.5767703926392738e-01 -3.6782522904820081e-01 -5.3910120111894322e-01 7.9395233422238531e+00 -6.2168236908571539e-01 -6.5813502816945857e-01 -4.2469908954971680e-01 6.0039130070419855e+00 -1.9858634429441771e-01 6.5693446063669447e-01 -7.2732425938349821e-01 1.9316701570259680e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="57" sensor_id="0" component_id="0" label="DSC_2459">
            <transform>6.2351121911963081e-01 -4.7466398075514987e-01 -6.2123092727714957e-01 9.2778759907459101e+00 -7.5871168626306473e-01 -5.5910645684369986e-01 -3.3430008531787775e-01 4.7487259856095712e+00 -1.8865401336788323e-01 6.7977501814155972e-01 -7.0874225777135136e-01 1.6629813543410865e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="58" sensor_id="0" component_id="0" label="DSC_2460">
            <transform>4.2630445498837499e-01 -5.7709619119591216e-01 -6.9658057521311589e-01 1.0609250087379118e+01 -8.8990814901030602e-01 -4.0568852799477539e-01 -2.0851931464131357e-01 2.8620243508195395e+00 -1.6225904591767884e-01 7.0878544310715286e-01 -6.8650943012990107e-01 8.5703245456402588e-01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="59" sensor_id="0" component_id="0" label="DSC_2461">
            <transform>1.3894482216882165e-01 -6.6539272868928678e-01 -7.3344860283451352e-01 1.0620031390447741e+01 -9.8421992709275408e-01 -1.7473083996928607e-01 -2.7933289766183478e-02 5.6640795932946808e-01 -1.0956948254878444e-01 7.2575591638721981e-01 -6.7917072840555970e-01 1.3913092967914917e-01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="60" sensor_id="0" component_id="0" label="DSC_2462">
            <transform>-1.9188589018065558e-01 -6.6014741509806141e-01 -7.2621291333115656e-01 1.0400396990410130e+01 -9.7683090168397779e-01 5.7014779568087870e-02 2.0627822092036119e-01 -2.4397216672972704e+00 -9.4769165158528457e-02 7.4896909499000741e-01 -6.5579272646546261e-01 -1.8077028241775617e-01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="61" sensor_id="0" component_id="0" label="DSC_2463">
            <transform>-3.8751922987586429e-01 -6.2165963463168961e-01 -6.8071149920213014e-01 9.5829114967261138e+00 -9.1658512567179773e-01 1.8093734557452773e-01 3.5655768730130971e-01 -4.6497134326037681e+00 -9.8491389845161703e-02 7.6210299543174442e-01 -6.3992067514679563e-01 -2.5630609264823617e-01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="62" sensor_id="0" component_id="0" label="DSC_2464">
            <transform>9.8883395558909437e-01 1.2888293435127415e-02 1.4846312729548397e-01 -1.0252630202756678e+00 1.0856132437286985e-02 -9.9983607503610727e-01 1.4490253444872481e-02 -2.5050898574825725e-01 1.4862554512104945e-01 -1.2716719259407760e-02 -9.8881177803905063e-01 -9.5449955653779214e-02 0 0 0 1</transform>
            <orientation>8</orientation>
        </camera>
        <camera id="63" sensor_id="0" component_id="0" label="DSC_2465">
            <transform>9.9975820113602687e-01 -1.3525805712932635e-03 2.1947887986194625e-02 -4.4460153221968404e-02 -1.6969586267125672e-03 -9.9987562617877623e-01 1.5679684468127272e-02 -9.8263517324910413e-02 2.1923950206922383e-02 -1.5713137796091126e-02 -9.9963615266152006e-01 1.0775622098905752e-01 0 0 0 1</transform>
            <orientation>8</orientation>
        </camera>
        <camera id="64" sensor_id="0" component_id="0" label="DSC_2466">
            <transform>9.9743653979477909e-01 -3.4260055754904567e-03 -7.1474551890965021e-02 1.0475416694942050e+00 -2.8811866799548255e-03 -9.9996601668053342e-01 7.7242635495460288e-03 -7.0965503880575695e-02 -7.1498586318421653e-02 -7.4985311804585675e-03 -9.9741251455182933e-01 -2.3292265252785303e-02 0 0 0 1</transform>
            <orientation>8</orientation>
        </camera>
        <camera id="65" sensor_id="0" component_id="0" label="DSC_2467">
            <transform>9.8481392375521271e-01 -2.3831345723054460e-02 -1.7196977216618853e-01 2.0372028151173396e+00 -2.2742103520464328e-02 -9.9970689730992435e-01 8.3015780686125362e-03 -2.3161194242348115e-01 -1.7211720514035492e-01 -4.2645553101167688e-03 -9.8506724707640136e-01 -5.4282238085977402e-02 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="66" sensor_id="0" component_id="0" label="DSC_2468">
            <transform>9.6345636064680673e-01 -2.1523684744027178e-02 -2.6699919873334876e-01 3.0545949962736429e+00 -1.7082022126855653e-02 -9.9967455041332209e-01 1.8947236631774656e-02 -2.1074878922410048e-01 -2.6732011830251029e-01 -1.3693949428947248e-02 -9.6351047223150077e-01 -8.7356661178386086e-02 0 0 0 1</transform>
            <orientation>6</orientation>
        </camera>
        <camera id="67" sensor_id="0" component_id="0" label="DSC_2469">
            <transform>9.3222013542518645e-01 -1.8246197631434345e-02 -3.6143145322431752e-01 4.1252123200091360e+00 -1.2485059921437787e-02 -9.9975515779545665e-01 1.8268764056152444e-02 -2.7735285904423079e-01 -3.6167629502996945e-01 -1.2518016351479470e-02 -9.3221969346287581e-01 -2.7301623444153761e-01 0 0 0 1</transform>
            <orientation>6</orientation>
        </camera>
        <camera id="68" sensor_id="0" component_id="0" label="DSC_2470">
            <transform>8.9715851097051091e-01 8.4087163020180045e-03 -4.4162868983267856e-01 5.5878042858789669e+00 1.7441631866788772e-02 -9.9971341483569731e-01 1.6397489910749130e-02 -1.9437026336792915e-01 -4.4136424376131705e-01 -2.2413872661856127e-02 -8.9704806038545104e-01 -6.2099974821892989e-01 0 0 0 1</transform>
            <orientation>6</orientation>
        </camera>
        <camera id="69" sensor_id="0" component_id="0" label="DSC_2471">
            <transform>9.5711605573663938e-01 1.0009628673410353e-02 -2.8953179995461442e-01 4.3668638948068832e+00 -7.6149035692104336e-02 -9.5556818935641985e-01 -2.8476439358398808e-01 2.0595392846023919e+00 -2.7951776368292058e-01 2.9460014057008577e-01 -9.1382743281310219e-01 -9.8015792247674360e-01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="70" sensor_id="0" component_id="0" label="DSC_2472">
            <transform>9.6797161868931725e-01 5.5178146516220036e-02 -2.4492104352018651e-01 3.4411771231183290e+00 -1.6475049338700885e-02 -9.5948592922121878e-01 -2.8127446449292437e-01 2.2149405226028476e+00 -2.5051849864085873e-01 2.7630078496726779e-01 -9.2784608533161450e-01 -8.1239543547886028e-01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="71" sensor_id="0" component_id="0" label="DSC_2473">
            <transform>9.7969259229316186e-01 9.4888722035600281e-02 -1.7663112703132183e-01 2.1714214555385647e+00 4.1078769024579437e-02 -9.5723126296128325e-01 -2.8639281405959205e-01 2.3067473991054328e+00 -1.9625228493276101e-01 2.7332112915030427e-01 -9.4169028933013488e-01 -6.1923747651517469e-01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="72" sensor_id="0" component_id="0" label="DSC_2474">
            <transform>9.8003655177579119e-01 1.7502303188810756e-01 -9.4314874182765199e-02 1.0248822998546296e+00 1.4256332008704681e-01 -9.4928742002066813e-01 -2.8023043010397963e-01 2.4866269593664563e+00 -1.3857870308663806e-01 2.6119022282466425e-01 -9.5528823427886289e-01 -5.7619121632287351e-01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="73" sensor_id="0" component_id="0" label="DSC_2475">
            <transform>9.7886420582698630e-01 2.0447162956495496e-01 4.0273134662092850e-03 -1.2488966338008861e-01 1.9713069557052532e-01 -9.3811249730426616e-01 -2.8475328139537509e-01 2.3448145451124072e+00 -5.4445894377667829e-02 2.7952870175458661e-01 -9.5859237921068996e-01 -4.9871759214075434e-01 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="74" sensor_id="0" component_id="0" label="DSC_2476">
            <transform>9.5048856471988996e-01 -3.0717221479379669e-01 -4.7082043237290011e-02 3.4442340775504149e-01 -2.7671050261105995e-01 -9.0552902966217608e-01 3.2163406875487116e-01 -2.3077189824299458e+00 -1.4143120617974983e-01 -2.9268140852768970e-01 -9.4569276565953964e-01 -1.3627200828648895e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="75" sensor_id="0" component_id="0" label="DSC_2477">
            <transform>9.7421096882002289e-01 -1.8209062160941072e-01 -1.3325161819899434e-01 1.4422163710676450e+00 -1.3063945286243636e-01 -9.3668705541061270e-01 3.2488566232137500e-01 -2.5997926744781634e+00 -1.8397369808359954e-01 -2.9909925735129067e-01 -9.3631902291118219e-01 -1.4423043406205382e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="76" sensor_id="0" component_id="0" label="DSC_2478">
            <transform>9.6423276795647883e-01 7.6454985828979360e-02 -2.5379086733150513e-01 2.7186712187995132e+00 1.5460646118054153e-01 -9.3996783315369814e-01 3.0423233687031143e-01 -2.5180923254257843e+00 -2.1529517263565567e-01 -3.3258849616039265e-01 -9.1816822035047141e-01 -1.4494124731059621e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="77" sensor_id="0" component_id="0" label="DSC_2479">
            <transform>8.9617244207137881e-01 1.7989293036966877e-01 -4.0560262286483628e-01 4.4034805731448925e+00 3.2014931858238599e-01 -8.9508082044163140e-01 3.1037837986684880e-01 -2.5938627585609115e+00 -3.0721225216949760e-01 -4.0800595397683770e-01 -8.5973936378206839e-01 -1.5652838298258860e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="78" sensor_id="0" component_id="0" label="DSC_2480">
            <transform>7.8008400246187715e-01 3.4397259661293755e-01 -5.2263926553829720e-01 5.6945699887275145e+00 5.4248446585457100e-01 -7.8802972822491435e-01 2.9106657613035508e-01 -2.1304973359610377e+00 -3.1173635240301778e-01 -5.1058006249081089e-01 -8.0132917479481613e-01 -2.0466928220597489e+00 0 0 0 1</transform>
            <orientation>1</orientation>
        </camera>
        <camera id="79" sensor_id="0" component_id="0" label="LIGHT_JPG">
            <transform>-9.5921408812124542e-01 2.0002020903848561e-02 -2.8197207718050687e-01 3.1264645787414684e+00 -5.7129199315689314e-02 9.6319361699298811e-01 2.6266768124288331e-01 -1.9540974910256339e+00 2.7684758936150405e-01 2.6806337934101832e-01 -9.2276618756920059e-01 -8.1330323775751900e-01 0 0 0 1</transform>
            <rotation_covariance>8.5903560103528313e-10 -1.2543944005525667e-10 2.2928596992551965e-11 -1.2543944005525669e-10 5.2401670933216213e-10 1.1742953661724827e-11 2.2928596992551981e-11 1.1742953661724851e-11 2.1958854345687830e-11</rotation_covariance>
            <location_covariance>2.3517186948057327e-08 -3.0540800122670602e-09 -9.4487032576963825e-09 -3.0540800122670602e-09 3.9169958328989508e-08 1.2131161913601973e-08 -9.4487032576963825e-09 1.2131161913601973e-08 8.1682470323134649e-09</location_covariance>
            <orientation>1</orientation>
        </camera>
        </cameras>
        <transform>
        <rotation locked="true">1.5794522643812561e-02 -9.9576205832182130e-01 -9.0600531240958432e-02 9.9068123860326129e-01 2.7844591124408475e-02 -1.3332427470128036e-01 1.3528198894886961e-01 -8.7650453232167025e-02 9.8692258131741695e-01</rotation>
        <translation locked="true">2.8124270532000166e-02 -2.2582621394150196e-02 3.1423181615446183e-01</translation>
        <scale locked="true">4.1742067062765946e-02</scale>
        </transform>
        <reference>LOCAL_CS["Local Coordinates (m)",LOCAL_DATUM["Local Datum",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]]]</reference>
        <region>
        <center>9.6301560532412533e-01 -1.9555670328101438e-01 -7.1428929690538308e+00</center>
        <size>3.9227424466798992e+00 3.3722517372082073e+00 9.9536752479369239e-01</size>
        <R>-9.9061187736964118e-01 -3.1751312527630408e-02 1.3296602034718355e-01 1.9681448340380478e-02 -9.9564506944597175e-01 -9.1123741577875020e-02 1.3528026096005225e-01 -8.7651296856915681e-02 9.8692274325495266e-01</R>
        </region>
        <settings>
        <property name="accuracy_tiepoints" value="1"/>
        <property name="accuracy_cameras" value="10"/>
        <property name="accuracy_cameras_ypr" value="10"/>
        <property name="accuracy_markers" value="0.0050000000000000001"/>
        <property name="accuracy_scalebars" value="0.001"/>
        <property name="accuracy_projections" value="0.5"/>
        </settings>
        <meta>
        <property name="AlignCameras/adaptive_fitting" value="false"/>
        <property name="AlignCameras/duration" value="54.514"/>
        <property name="AlignCameras/min_image" value="2"/>
        <property name="AlignCameras/ram_used" value="206516224"/>
        <property name="AlignCameras/reset_alignment" value="false"/>
        <property name="AlignCameras/subdivide_task" value="true"/>
        <property name="Info/LastSavedDateTime" value="2024:07:25 19:28:16"/>
        <property name="Info/LastSavedSoftwareVersion" value="1.8.4.14856"/>
        <property name="OptimizeCameras/sigma0" value="0.229369678293728"/>
        </meta>
    </chunk>
    </document>
    """

    # Read Metashape XML
    dict_xml = xmltodict.parse(open(metashape_xml_path,"r").read())
    sensors_dict = dict_xml["document"]["chunk"]["sensors"]["sensor"]
    if "@id" in sensors_dict:
        sensors_dict = [sensors_dict]
    components_dict = dict_xml["document"]["chunk"]["components"]["component"]
    if "@id" in components_dict:
        components_dict = [components_dict]

    # Extract images
    if images_folder is not None:
        images = [f for f in os.listdir(images_folder) if os.path.isfile(os.path.join(images_folder, f))]
        image_ext = images[0].split(".")[-1]
    else:
        images_folder = 'images'
        image_ext = 'png'

    # Extract views, intrinsics and poses data
    views_data = {}
    intrinsics_data = {}
    poses_data = {}
    for camera in dict_xml["document"]["chunk"]["cameras"]["camera"]:

        # Get camera ID and label
        camera_id = int(camera["@id"])
        camera_id_padded = f"{camera_id:08d}"

        camera_label = str(camera["@label"])
        image_path = os.path.join(images_folder, f"{camera_label}.{image_ext}")

        # Extract intrinsic data
        sensor_id = int(camera["@sensor_id"])
        sensor_id_padded = f"{sensor_id:08d}"

        for sensor in sensors_dict:
            if int(sensor["@id"]) == sensor_id:
                
                width = float(sensor["resolution"]["@width"])
                height = float(sensor["resolution"]["@height"])
                if abs(width/height - 4/3) < 0.01:
                    sensor_width = 6.4
                    sensor_height = 4.8
                elif abs(width/height - 3/2) < 0.01:
                    sensor_width = 36
                    sensor_height = 24
                else:
                    raise ValueError("Image aspect ratio is not 4:3 or 3:2")

                focal_px = float(sensor["calibration"]["f"])
                focal_mm = focal_px * sensor_width / width

                cx = float(sensor["calibration"]["cx"])
                cy = float(sensor["calibration"]["cy"])
                k1 = float(sensor["calibration"]["k1"])
                k2 = float(sensor["calibration"]["k2"])
                k3 = float(sensor["calibration"]["k3"])
                p1 = float(sensor["calibration"]["p1"])
                p2 = float(sensor["calibration"]["p2"])

                intrinsics_data[sensor_id_padded] = {
                    "intrinsicId": sensor_id_padded,
                    "width": f"{width:0.0f}",
                    "height": f"{height:0.0f}",
                    "sensorWidth": f"{sensor_width:0.2f}",
                    "sensorHeight": f"{sensor_height:0.2f}",
                    "serialNumber": "-1",
                    "type": "pinhole",
                    "initializationMode": "estimated",
                    "focalLength": f"{focal_mm:0.20f}",
                    "initialFocalLength": "-1",
                    "pixelRatio": "1",
                    "pixelRatioLocked": "1",
                    "principalPoint": [f"{cx:0.20f}",
                                    f"{cy:0.20f}"
                                    ],
                    "distortionInitializationMode": "estimated",
                    "distortionParams": [f"{k1:0.20f}",
                                        f"{k2:0.20f}",
                                        f"{k3:0.20f}",
                                        f"{p1:0.20f}",
                                        f"{p2:0.20f}"
                                    ],
                    "undistortionOffset": ["0", "0"],
                    "undistortionParams": "",
                    "distortionType" : "brown",
                    "undistortionType": "none",
                    "locked": "0"
                }

        views_data[camera_id_padded] = {
            "viewId": camera_id_padded,
            "poseId": camera_id_padded,
            "frameId": str(camera_id),
            "intrinsicId": sensor_id_padded,
            "resectionId": "",
            "path": image_path,
            "width": f"{width:0.0f}",
            "height": f"{height:0.0f}",
            "metadata": {}
        }

        # Get component id
        component_id = int(camera["@component_id"])
        for component in components_dict:
            if int(component["@id"]) == component_id:
                component_rotation = np.array([float(x) for x in component["transform"]["rotation"]["#text"].split()]).reshape(3,3)
                component_translation = np.array([float(x) for x in component["transform"]["translation"]["#text"].split()]).reshape(3,1)
                component_scale = float(component["transform"]["scale"]["#text"])

                component_transform = np.eye(4)
                component_transform[:3,:3] = component_scale * component_rotation
                component_transform[:3,3] = component_translation.ravel()

        pose = np.array([float(x) for x in camera["transform"].split()]).reshape(4,4)
        pose = component_transform @ pose
        pose = _cv_to_gl(pose)
        poses_data[camera_id_padded] = {
            "poseId": camera_id_padded,
            "pose": {
                "transform": {
                    "rotation": [f"{x:0.20f}" for x in pose[:3,:3].ravel().tolist()],
                    "center": [f"{x:0.20f}" for x in pose[:3,3].tolist()]
                }
            }
        }


    return views_data, intrinsics_data, poses_data